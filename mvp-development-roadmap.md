# MVP開発ロードマップ - React/Next.js/TypeScript版

## 開発方針

**販売方法に依存しない実装**を行い、後から任意の配布形態（Web/Electron/拡張機能）に対応できる設計とする。

---

## Phase 1: プロジェクトセットアップ（Day 1-2）

### 1.1 開発環境構築

- [ ] Node.js 18+ インストール確認
- [ ] Git/GitHubリポジトリ作成
- [ ] VSCode + 拡張機能セットアップ

### 1.2 プロジェクト初期化

- [ ] Next.jsプロジェクト作成（TypeScript有効）
- [ ] ディレクトリ構造の設計
- [ ] ESLint/Prettier設定
- [ ] git hooks設定（husky）

### 1.3 必要パッケージインストール

- [ ] GitHub API関連：@octokit/rest, @octokit/types
- [ ] チャート描画：recharts or chart.js
- [ ] 状態管理：zustand or jotai（軽量で配布方法に依存しない）
- [ ] 日付処理：date-fns
- [ ] スタイリング：Tailwind CSS
- [ ] テスト：Jest, React Testing Library

### 1.4 プロジェクト構造作成

```
src/
├── core/           # 販売方法に依存しないコア機能
├── components/     # React UIコンポーネント
├── hooks/          # カスタムフック
├── utils/          # ユーティリティ関数
├── types/          # TypeScript型定義
└── pages/          # Next.jsページ（開発用）
```

---

## Phase 2: GitHub API連携のコア実装（Day 3-7）

### 2.1 型定義の作成

- [ ] GitHub APIレスポンスの型定義
- [ ] アプリケーション内部のデータモデル定義
- [ ] エラー型の定義

### 2.2 GitHub APIクライアント作成

- [ ] 基本的なAPIクライアントクラス設計
- [ ] 認証の抽象化（インターフェース定義）
- [ ] エラーハンドリング設計
- [ ] レート制限対策の実装

### 2.3 主要API機能の実装

- [ ] リポジトリ情報取得
- [ ] Issue一覧取得（ページネーション対応）
- [ ] Issue詳細取得
- [ ] Milestone取得
- [ ] Label取得

### 2.4 データ変換層

- [ ] GitHub APIレスポンス → 内部データモデル変換
- [ ] フィルタリング・ソート機能
- [ ] データ正規化処理

### 2.5 開発用の認証実装

- [ ] Personal Access Token使用の暫定実装
- [ ] 環境変数からのトークン読み込み
- [ ] 認証プロバイダーインターフェース作成

---

## Phase 3: データ処理・ビジネスロジック（Day 8-12）

### 3.1 Issue管理ロジック

- [ ] Issue集計機能（open/closed カウント）
- [ ] 期間別フィルタリング
- [ ] ラベル・マイルストーン別グルーピング
- [ ] ストーリーポイント管理（カスタムフィールド対応）

### 3.2 バーンダウン計算エンジン

- [ ] 日別のIssue状態計算
- [ ] 理想線（ideal line）の計算
- [ ] 実績線（actual line）の計算
- [ ] 残作業量の計算（Issue数/ストーリーポイント）

### 3.3 データキャッシュ層

- [ ] メモリキャッシュ実装
- [ ] キャッシュ無効化戦略
- [ ] 差分更新ロジック

### 3.4 統計・分析機能

- [ ] ベロシティ計算
- [ ] 完了予測日計算
- [ ] 平均リードタイム計算

---

## Phase 4: React UIコンポーネント開発（Day 13-18）

### 4.1 基本コンポーネント設計

- [ ] コンポーネント階層の設計
- [ ] Props/State設計
- [ ] コンポーネント間のデータフロー設計

### 4.2 データ取得層

- [ ] カスタムフック作成（useGitHubData等）
- [ ] ローディング状態管理
- [ ] エラーハンドリング
- [ ] データ更新トリガー

### 4.3 Issue管理UI

- [ ] Issue一覧コンポーネント
- [ ] Issueカード/リストアイテム
- [ ] フィルターバー
- [ ] ソート機能
- [ ] 検索機能

### 4.4 バーンダウンチャート

- [ ] チャートコンポーネント作成
- [ ] 期間セレクター
- [ ] 表示オプション（Issue数/ポイント切り替え）
- [ ] ツールチップ・凡例
- [ ] レスポンシブ対応

### 4.5 共通UIコンポーネント

- [ ] ローディングスピナー
- [ ] エラー表示
- [ ] 空状態表示
- [ ] モーダル/ダイアログ

---

## Phase 5: 状態管理とデータフロー（Day 19-21）

### 5.1 グローバル状態管理

- [ ] 選択中のリポジトリ
- [ ] Issue一覧のキャッシュ
- [ ] フィルター設定の永続化
- [ ] ユーザー設定

### 5.2 ローカル状態管理

- [ ] フォーム状態
- [ ] UI状態（開閉、選択等）
- [ ] 一時的なフィルター状態

### 5.3 データ同期

- [ ] 手動更新機能
- [ ] 自動更新の検討（ポーリング）
- [ ] 楽観的更新の実装

---

## Phase 6: 開発用UI実装（Day 22-24）

### 6.1 開発用ページ作成

- [ ] トークン入力画面
- [ ] リポジトリ選択画面
- [ ] メインダッシュボード
- [ ] 設定画面

### 6.2 ナビゲーション

- [ ] ページ間遷移
- [ ] パンくずリスト
- [ ] サイドバー/ヘッダー

### 6.3 レスポンシブ対応

- [ ] モバイル表示最適化
- [ ] タブレット対応
- [ ] デスクトップレイアウト

---

## Phase 7: テストとリファクタリング（Day 25-28）

### 7.1 単体テスト

- [ ] GitHub APIクライアントのテスト
- [ ] バーンダウン計算ロジックのテスト
- [ ] データ変換処理のテスト
- [ ] ユーティリティ関数のテスト

### 7.2 統合テスト

- [ ] API連携の統合テスト
- [ ] データフロー全体のテスト
- [ ] エラーケースのテスト

### 7.3 UIテスト

- [ ] コンポーネントのスナップショットテスト
- [ ] ユーザーインタラクションテスト
- [ ] レスポンシブ表示テスト

### 7.4 リファクタリング

- [ ] コードの重複除去
- [ ] パフォーマンス最適化
- [ ] 型定義の改善
- [ ] エラーハンドリングの統一

---

## Phase 8: 配布準備（Day 29-30）

### 8.1 ビルド設定

- [ ] 本番ビルド設定
- [ ] 環境変数の管理方法決定
- [ ] バンドルサイズ最適化

### 8.2 ドキュメント作成

- [ ] READMEファイル
- [ ] セットアップガイド
- [ ] API使用方法
- [ ] コントリビューションガイド

### 8.3 配布方法の検証準備

- [ ] Web版としてのデプロイテスト（Vercel）
- [ ] Electron版へのラップテスト
- [ ] ブラウザ拡張機能への変換テスト

### 8.4 デモ環境準備

- [ ] サンプルデータの準備
- [ ] デモ用GitHubリポジトリ作成
- [ ] スクリーンショット/動画作成

---

## 重要な設計原則

### 1. 認証の抽象化

```
インターフェース定義 → 開発用はPAT → 後で各配布形態用に実装
```

### 2. コア機能の独立性

```
GitHub API ← → Core Logic ← → UI Components
     ↑              ↑              ↑
 認証プロバイダー  純粋関数   React/Next.js
```

### 3. データフローの単純化

```
GitHub API → 変換 → Store → Hooks → Components
```

### 4. テスト可能な設計

- 外部依存の最小化
- 副作用の分離
- モック可能な構造

---

## 段階的な動作確認

### Week 1: APIアクセス確認

- GitHub APIからデータ取得成功
- コンソールでIssue一覧表示

### Week 2: ロジック動作確認

- バーンダウンデータ計算成功
- テストデータで検証

### Week 3: UI基本動作

- Issue一覧の表示
- 基本的なチャート描画

### Week 4: 統合動作確認

- エンドツーエンドの動作
- 実際のGitHubリポジトリでテスト

---

## リスク管理

### 技術的リスク

1. **GitHub API制限** → キャッシュで対応
2. **大量データ** → ページネーション実装
3. **認証の複雑さ** → 最初はPATで簡素化

### スケジュールリスク

1. **予期しないAPI仕様** → 早期のAPI検証
2. **パフォーマンス問題** → 段階的な最適化
3. **UI実装の遅れ** → 最小限のUIから開始

---

## 成功基準

### MVP完成の定義

- [ ] GitHubリポジトリと連携できる
- [ ] Issue一覧が表示できる
- [ ] バーンダウンチャートが表示できる
- [ ] データが更新できる
- [ ] 基本的なフィルタリングが可能

### 配布準備完了の定義

- [ ] コア機能が独立している
- [ ] 認証が抽象化されている
- [ ] テストカバレッジ70%以上
- [ ] ドキュメント完備
- [ ] 3つ以上の配布方法でテスト済み

---

_このロードマップは30日間の集中開発を想定していますが、実際の進捗に応じて柔軟に調整してください。重要なのは、コア機能を配布方法から独立させることです。_
